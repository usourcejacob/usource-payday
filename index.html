<!DOCTYPE HTML>
<html>

<head>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title id="demotitle">Days left before pay day!</title>
	<style>
		p {
			text-align: center;
			font-size: 60px;
			margin-top: 0px;
		}

		body {
			min-height: 900px;
			font-family: 'Sniglet', cursive !important;
		}

		#gif-wrap {
			width: 100%;
			height: 350px;
			background-repeat: no-repeat;
			background-position: center;
			text-align: center;
		}
	</style>
	<link href="https://fonts.googleapis.com/css?family=Sniglet" rel="stylesheet">
	<link rel="stylesheet" href="normalize.css">
	<link rel="stylesheet" href="skeleton.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.min.css">
</head>

<body>

	<div class="container">
		<div class="row">
			<div class="six columns">
				<h1 style="text-align: center; margin-top: 120px;">Days left before payday</h1>
				<p id="demo"></p>
			</div>
			<div class="five columns">
				<div id="gif-wrap" style="margin-top: 100px;"></div>
			</div>
		</div>
	</div>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script>
		// Set the date we're counting down to
		var countDownDate = new Date("Mar 7, 2019 10:00:00").getTime();

		// Update the count down every 1 second
		var x = setInterval(function () {

			// Get todays date and time
			var now = new Date().getTime();

			// Find the distance between now and the count down date
			var distance = countDownDate - now;

			// Time calculations for days, hours, minutes and seconds
			var days = Math.floor(distance / (1000 * 60 * 60 * 24));
			var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
			var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
			var seconds = Math.floor((distance % (1000 * 60)) / 1000);

			// Output the result in an element with id="demo"
			document.getElementById("demo").innerHTML = days + "d " + hours + "h "
				+ minutes + "m " + seconds + "s ";

			document.getElementById("demotitle").innerHTML = days + "d " + hours + "h "
				+ minutes + "m " + seconds + "s before payday";

			// If the count down is over, write some text 
			if (distance < 0) {
				clearInterval(x);
				document.getElementById("demo").innerHTML = "It\'s PAYDAY!!!";
				var notification = new Notification("You'll be notified on payday");
			}
		}, 1000);
	</script>
	<script>
		$(document).ready(function () {
			// Initiate gifLoop for set interval
			var refresh;
			// Duration count in seconds
			const duration = 1000 * 10;
			// Giphy API defaults
			const giphy = {
				baseURL: "https://api.giphy.com/v1/gifs/",
				key: "dc6zaTOxFJmzC",
				tag: "cash, money, payday",
				type: "random",
				rating: "pg-13"
			};
			// Target gif-wrap container
			const $gif_wrap = $("#gif-wrap");
			// Giphy API URL
			let giphyURL = encodeURI(
				giphy.baseURL +
				giphy.type +
				"?api_key=" +
				giphy.key +
				"&tag=" +
				giphy.tag +
				"&rating=" +
				giphy.rating
			);

			// Call Giphy API and render data
			var newGif = () => $.getJSON(giphyURL, json => renderGif(json.data));

			// Display Gif in gif wrap container
			var renderGif = _giphy => {
				// Set gif as bg image
				$gif_wrap.css({
					"background-image": 'url("' + _giphy.image_original_url + '")',
					"min-height" : 'auto',
					"width" : '600px'
				});

				// Start duration countdown
				refreshRate();
			};

			// Call for new gif after duration
			var refreshRate = () => {
				// Reset set intervals
				clearInterval(refresh);
				refresh = setInterval(function () {
					// Call Giphy API for new gif
					newGif();
				}, duration);
			};

			// Call Giphy API for new gif
			newGif();
		});

	</script>
	<script>
		function notifyMe() {
			// Let's check if the browser supports notifications
			if (!("Notification" in window)) {
				alert("This browser does not support desktop notification");
			}

			// Let's check whether notification permissions have already been granted
			else if (Notification.permission === "granted") {
				// If it's okay let's create a notification
				var notification = new Notification("You'll be notified on payday");
			}

			// Otherwise, we need to ask the user for permission
			else if (Notification.permission !== "denied") {
				Notification.requestPermission().then(function (permission) {
					// If the user accepts, let's create a notification
					if (permission === "granted") {
						var notification = new Notification("You'll be notified on payday");
					}
				});
			}

			// At last, if the user has denied notifications, and you 
			// want to be respectful there is no need to bother them any more.
		} Notification.requestPermission().then(function (result) {
			console.log(result);
		}); function spawnNotification(body, icon, title) {
			var options = {
				body: body,
				icon: icon
			};
			var n = new Notification(title, options);
		}
	</script>

</body>

</html>